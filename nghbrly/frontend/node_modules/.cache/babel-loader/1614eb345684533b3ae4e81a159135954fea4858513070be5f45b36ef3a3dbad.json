{"ast":null,"code":"var _jsxFileName = \"/Users/cchae/python/INET-Monday-Spring2023-Team-3/nghbrly/frontend/src/Components/Login/Login.jsx\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport { Button, Pane, TextInput, Text, InlineAlert } from \"evergreen-ui\";\nimport { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport bg from \"../../static/bg.jpg\";\nimport Logo from \"../../static/logo.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const history = useHistory();\n  const [isMounted, setIsMounted] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [hasSubmittedOnce, setHasSubmittedOnce] = useState(false);\n  const register = async () => {\n    if (!hasSubmittedOnce) setHasSubmittedOnce(true);\n    try {\n      const {\n        data: {\n          jwt\n        }\n      } = await axios.post(`${process.env.REACT_APP_SERVER_URL_PREFIX}/api/login/`, {\n        username,\n        password\n      });\n      localStorage.setItem(\"jwt\", jwt);\n      axios.defaults.headers.common[\"Authorization\"] = jwt;\n      history.push(\"/\");\n    } catch (e) {\n      setError(true);\n    }\n  };\n  useEffect(() => {\n    if (localStorage.getItem(\"jwt\")) {\n      history.replace(\"/\");\n    } else {\n      setIsMounted(true);\n    }\n  }, []);\n  if (!isMounted) return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 26\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        display: \"flex\",\n        overflow: \"hidden\",\n        width: \"100vw\",\n        height: \"100vh\",\n        alignItems: \"flex-end\",\n        justifyContent: \"flex-end\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: bg,\n        style: {\n          width: \"100vw\",\n          height: \"100%\",\n          objectFit: \"cover\",\n          objectPosition: \"bottom\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Pane, {\n      style: {\n        zIndex: 2,\n        position: \"relative\",\n        height: \"100vh\",\n        display: \"flex\",\n        justifyContent: \"flex-end\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: 700,\n          height: \"100%\",\n          backgroundColor: \"#FFF\",\n          display: \"flex\",\n          alignItems: \"center\",\n          flexDirection: \"column\",\n          overflow: \"scroll\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: Logo,\n          style: {\n            width: 300,\n            margin: \"128px 0\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            width: \"100%\",\n            flexGrow: 2,\n            marginTop: 32,\n            marginBottom: 128\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Welcome!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Log in below to get started\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\"\n            },\n            children: /*#__PURE__*/_jsxDEV(TextInput, {\n              style: {\n                marginTop: 16\n              },\n              name: \"username\",\n              placeholder: \"Username\",\n              onChange: e => setUsername(e.target.value),\n              value: username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"column\"\n            },\n            children: /*#__PURE__*/_jsxDEV(TextInput, {\n              style: {\n                marginTop: 16\n              },\n              name: \"password\",\n              placeholder: \"Password\",\n              type: \"password\",\n              onChange: e => setPassword(e.target.value),\n              value: password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            appearance: \"primary\",\n            style: {\n              marginTop: 16\n            },\n            onClick: register,\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(InlineAlert, {\n            intent: \"danger\",\n            style: {\n              marginTop: 16\n            },\n            children: \"Invalid username/password. Please try again.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              marginTop: 32\n            },\n            children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/register\",\n              children: \"Create one!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 38\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Login, \"POrHn48RdkGnbdwnTWTlq9xgIrU=\", false, function () {\n  return [useHistory];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["axios","Button","Pane","TextInput","Text","InlineAlert","useEffect","useState","Link","useHistory","bg","Logo","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","_s","history","isMounted","setIsMounted","username","setUsername","password","setPassword","error","setError","hasSubmittedOnce","setHasSubmittedOnce","register","data","jwt","post","process","env","REACT_APP_SERVER_URL_PREFIX","localStorage","setItem","defaults","headers","common","push","e","getItem","replace","fileName","_jsxFileName","lineNumber","columnNumber","children","style","position","display","overflow","width","height","alignItems","justifyContent","src","objectFit","objectPosition","zIndex","backgroundColor","flexDirection","margin","flexGrow","marginTop","marginBottom","name","placeholder","onChange","target","value","type","appearance","onClick","intent","to","_c","$RefreshReg$"],"sources":["/Users/cchae/python/INET-Monday-Spring2023-Team-3/nghbrly/frontend/src/Components/Login/Login.jsx"],"sourcesContent":["import axios from \"axios\";\nimport { Button, Pane, TextInput, Text, InlineAlert } from \"evergreen-ui\";\nimport { useEffect, useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport bg from \"../../static/bg.jpg\";\nimport Logo from \"../../static/logo.svg\";\n\nfunction Login() {\n  const history = useHistory();\n\n  const [isMounted, setIsMounted] = useState(false);\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const [hasSubmittedOnce, setHasSubmittedOnce] = useState(false);\n\n  const register = async () => {\n    if (!hasSubmittedOnce) setHasSubmittedOnce(true);\n    try {\n      const {\n        data: { jwt },\n      } = await axios.post(\n        `${process.env.REACT_APP_SERVER_URL_PREFIX}/api/login/`,\n        {\n          username,\n          password,\n        }\n      );\n      localStorage.setItem(\"jwt\", jwt);\n      axios.defaults.headers.common[\"Authorization\"] = jwt;\n      history.push(\"/\");\n    } catch (e) {\n      setError(true);\n    }\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem(\"jwt\")) {\n      history.replace(\"/\");\n    } else {\n      setIsMounted(true);\n    }\n  }, []);\n\n  if (!isMounted) return <div />;\n\n  return (\n    <>\n      <div\n        style={{\n          position: \"absolute\",\n          display: \"flex\",\n          overflow: \"hidden\",\n          width: \"100vw\",\n          height: \"100vh\",\n          alignItems: \"flex-end\",\n          justifyContent: \"flex-end\",\n        }}\n      >\n        <img\n          src={bg}\n          style={{\n            width: \"100vw\",\n            height: \"100%\",\n            objectFit: \"cover\",\n            objectPosition: \"bottom\",\n          }}\n        />\n      </div>\n      <Pane\n        style={{\n          zIndex: 2,\n          position: \"relative\",\n          height: \"100vh\",\n          display: \"flex\",\n          justifyContent: \"flex-end\",\n        }}\n      >\n        <div\n          style={{\n            width: 700,\n            height: \"100%\",\n            backgroundColor: \"#FFF\",\n            display: \"flex\",\n            alignItems: \"center\",\n            flexDirection: \"column\",\n            overflow: \"scroll\",\n          }}\n        >\n          <img src={Logo} style={{ width: 300, margin: \"128px 0\" }} />\n          <div\n            style={{\n              display: \"flex\",\n              flexDirection: \"column\",\n              alignItems: \"center\",\n              width: \"100%\",\n              flexGrow: 2,\n              marginTop: 32,\n              marginBottom: 128,\n            }}\n          >\n            <h1>Welcome!</h1>\n            <p>Log in below to get started</p>\n            \n            <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n              <TextInput\n                style={{ marginTop: 16 }}\n                name=\"username\"\n                placeholder=\"Username\"\n                onChange={(e) => setUsername(e.target.value)}\n                value={username}\n              />\n            </div>\n            <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n              <TextInput\n                style={{ marginTop: 16 }}\n                name=\"password\"\n                placeholder=\"Password\"\n                type=\"password\"\n                onChange={(e) => setPassword(e.target.value)}\n                value={password}\n              />\n            </div>\n            <Button\n              appearance=\"primary\"\n              style={{ marginTop: 16 }}\n              onClick={register}\n            >\n              Log in\n            </Button>\n            {error && (\n              <InlineAlert intent=\"danger\" style={{ marginTop: 16 }}>\n                Invalid username/password. Please try again.\n              </InlineAlert>\n            )}\n            <p style={{ marginTop: 32 }}>\n              Don't have an account? <Link to=\"/register\">Create one!</Link>\n            </p>\n          </div>\n        </div>\n      </Pane>\n    </>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}